<!DOCTYPE html>
<html>
    <!--*******************************************************************************************************

    Mathtutor 6.28 Proportional Reasoning
    The five major sections, the hint panel and the skill meter are fully done. No problem-specific elements yet.

    ********************************************************************************************************-->
    <head>

	<link rel="stylesheet" type="text/css" href="https://cdn.ctat.cs.cmu.edu/releases/latest/CTAT.css">
        <link rel="stylesheet" type="text/css" href="style.css">
        
	<script src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
	<script src="https://cdn.ctat.cs.cmu.edu/releases/latest/ctat.min.js"></script>
	<script src="https://cdn.ctat.cs.cmu.edu/releases/latest/ctatloader.js"></script>

	<script>

         $(document).ready(function() {
             $(".card-container img").click(function() {
                 console.log('flipping card' );


                 // is the card flipping face down or face up?
                 var flippedDown = $(this).attr("class").indexOf("card-front") >= 0

                 var showClass = flippedDown ? ".card-back" : ".card-front";
                 console.log('showing class', showClass);
                 var showMe = $(this).siblings(showClass);
                 $(this).hide();
                 showMe.show();

                 var ctatButton = $(this).siblings("div");
                 console.log(ctatButton);
                 ctatButton.attr("value", flippedDown ? "0" : "1");
             });

             $(".card-button").click(function() {
                 var originalValue = $(this).attr("value");
                 console.log('clicked CTAT button with value=', originalValue );

                 var flippedUp = originalValue == "1";
                 console.log('originally:', flippedUp);
                 
//                 var newImgSrc = flippedUp ? "Assets/red_card_back.png" : "Assets/card_dot_16.png";
  //               console.log('setting new img src to ', newImgSrc);
//                 $(this).children("img").attr("src", newImgSrc);
                 var newValue = flippedUp ? "0": "1"
                 console.log('setting value to :', newValue);
                 $(this).attr("value", newValue);

                 $(this).siblings(".hidden-button")
                 
             });
         });
                  
	 var myVars =
	 {
	     question_file: "../FinalBRDs/problem.brd",
	     tutoring_service_communication: "javascript"
	 };

	 function ctatOnload ()
	 {
	     initTutor(myVars);
	 }

        </script>
    </head>

    <body>
	<!-- Header -->
	<div class="tutor-section">
	    <h1>Binary Numbers</h1>
            <h3>Lesson 1: Converting from decimal to binary numbers</h3>
	</div>

	<!-- Problem statement -->		
	<div id="problem" class="tutor-section" >
	    <div class="section-header">
		<h2>Problem</h2>
		<p>Find your goal in this problem.</p>
	    </div>
            <div class="section-content">
                <p>Enter the binary representation of the number <div id="originalDecimal" class="CTATTextInput"></div> in the box to the right.</p>
                <p>Click on the cards to flip them over.</p>
            </div>
            
	</div>

	<!-- Solution steps -->
	<div id="solution" class="tutor-section" >
	    <div class="section-header">
		<h2>Solution</h2>
		<p>Generate solution steps with feedback from the tutor.</p>
	    </div>

            <div class="section-content">
                <div id="card-row">
                    <div id="card-container-16" class="card-container">
                        <div id="cardButton16" class="CTATButton card-button"
                             data-ctat-disable-on-correct="false" 
                             data-ctat-tutor="false"
                             data-ctat-show-feedback="false"
                             value="0">
                        </div>
                        <div id="binary-digit-16" class="CTATTextInput digit-input"></div>
                    </div>
                    <div id="card-container-8" class="card-container">
                        <div id="cardButton8" class="CTATButton card-button"
                             data-ctat-disable-on-correct="false" 
                             data-ctat-tutor="false"
                             data-ctat-show-feedback="false"
                             value="0">
                        </div>
                        <div id="binary-digit-8" class="CTATTextInput digit-input"></div>
                    </div>
                    <div id="card-container-4" class="card-container">
                        <div id="cardButton4" class="CTATButton card-button"
                             data-ctat-disable-on-correct="false" 
                             data-ctat-tutor="false"
                             data-ctat-show-feedback="false"
                             value="0">
                        </div>
                        <div id="binary-digit-4" class="CTATTextInput digit-input"></div>
                    </div>
                    <div id="card-container-2" class="card-container">
                        <div id="cardButton2" class="CTATButton card-button"
                             data-ctat-disable-on-correct="false" 
                             data-ctat-tutor="false" 
                             data-ctat-show-feedback="false"
                             value="0">
                        </div>
                        <div id="binary-digit-2" class="CTATTextInput digit-input"></div>
                    </div>
                    <div id="card-container-1" class="card-container">
                        <div id="cardButton1" class="CTATButton card-button"
                             data-ctat-disable-on-correct="false" 
                             data-ctat-tutor="false"
                             data-ctat-show-feedback="false"
                             value="0">
                        </div>
                        <div id="binary-digit-1" class="CTATTextInput digit-input"></div>
                    </div>
                </div>

                <div id="final-answer-container">
                    <p>Enter complete binary number here:</p>
                    <div id="full-binary-number" class="CTATTextInput"></div>
                </div>
                
            </div>
	</div>

	<!-- Hint panel -->
	<div id="hints" class="tutor-section" >
	    <div class="section-header">
		<h2>Hints</h2>
		<p>Request and read hints to help you learn.</p>
	    </div>
	    <div id="hint-window" class="CTATHintWindow" ></div>
	    <div id="hint-button" class="CTATHintButton" ></div>
	    <div id="done-button" class="CTATDoneButton" ></div>
	</div>

	<!-- Skill meter -->
	<div id="skills" class="tutor-section" >
	    <div class="section-header">
		<h2>Skills</h2>
		<p>Watch your skills grow as you solve tutor problems.</p>
	    </div>
	    <div id="skill-window" class="CTATSkillWindow" >
	    </div>
    </body>
</html>
